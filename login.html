<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CinemaLand - تسجيل الدخول وإنشاء حساب</title>
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.x.x/firebase-auth-compat.js"></script>
  <style>
    /* التنسيقات الأساسية للموقع */
    body {
      margin: 0;
      padding: 0;
      background-color: #000;
      color: white;
      font-family: 'Tajawal', sans-serif;
      font-weight:700;
      background: linear-gradient(135deg, #000, #1a1a1a);
      min-height: 100vh;
    }
    
    /* شريط التنقل العلوي */
    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      width: 90%;
      padding: 15px 5%;
      background-color: rgba(0, 0, 0, 0.8);
      position: fixed;
      top: 0;
      z-index: 1000;
      box-shadow: 0 4px 20px rgba(255, 0, 0, 0.2);
    }
    .logo {
      font-size: 24px;
      font-weight: bold;
      color: red;
      text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
    }
    .nav-links {
      list-style: none;
      display: flex;
      gap: 10px;
      margin: 0;
      padding: 0;
    }
    .nav-links li a {
      display:inline-block;
      padding:8px 12px;
      border:2px solid red;
      border-radius:20px;
      text-decoration: none;
      color: white;
      transition: 0.3s ease;
      font-weight:500;
      font-size: 14px;
    }
    .nav-links li a:hover {
      background-color:red;
      color: #fff;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(255, 0, 0, 0.3);
    }
    .auth-buttons {
      display: flex;
      gap: 8px;
    }
    .auth-buttons button, .watch-btn {
      background: red;
      color: white;
      border: none;
      padding: 8px 12px;
      cursor: pointer;
      border-radius: 20px;
      font-size: 14px;
      position: relative;
      transition: 0.3s;
      font-weight: bold;
    }
    .auth-buttons button::before, .watch-btn::before {
      content: "";
      position: absolute;
      top: -5px;
      left: -5px;
      right: -5px;
      bottom: -5px;
      border-radius: 25px;
      border: 2px solid red;
      opacity: 0;
      transition: 0.3s;
    }
    .auth-buttons button:hover::before, .watch-btn:hover::before {
      opacity: 1;
    }
    .auth-buttons button:hover {
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(255, 0, 0, 0.4);
    }
    .search-box {
      display: flex;
      align-items: center;
      background: rgba(255, 255, 255, 0.2);
      padding: 5px;
      border-radius: 5px;
      width: 180px;
      position: relative;
      transition: all 0.3s ease;
    }
    .search-box:hover {
      background: rgba(255, 255, 255, 0.3);
    }
    .search-box input {
      background: none;
      border: none;
      color: white;
      padding: 5px;
      width: 100%;
    }
    .search-box input::placeholder {
      color: rgba(255, 255, 255, 0.7);
    }
    .search-box button {
      background: none;
      border: none;
      cursor: pointer;
      color: white;
      font-size: 20px;
    }
    
    /* تصميم صفحات المصادقة */
    .auth-container {
      display: flex;
      justify-content: center;
      align-items: center;
      min-height: 100vh;
      padding: 80px 20px 40px;
    }
    
    .auth-box {
      background: rgba(0, 0, 0, 0.8);
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(255, 0, 0, 0.2);
      overflow: hidden;
      width: 100%;
      max-width: 500px;
      position: relative;
      border: 2px solid rgba(255, 0, 0, 0.5);
    }
    
    .auth-header {
      background: rgba(255, 0, 0, 0.2);
      padding: 25px 30px;
      text-align: center;
      border-bottom: 2px solid red;
    }
    
    .auth-header h2 {
      margin: 0;
      color: #fff;
      font-size: 28px;
      text-shadow: 0 0 10px rgba(255, 0, 0, 0.5);
    }
    
    .auth-tabs {
      display: flex;
      background: rgba(30, 30, 30, 0.8);
    }
    
    .auth-tab {
      flex: 1;
      text-align: center;
      padding: 15px;
      cursor: pointer;
      transition: all 0.3s ease;
      font-weight: bold;
    }
    
    .auth-tab.active {
      background: red;
      color: white;
    }
    
    .auth-tab:not(.active):hover {
      background: rgba(255, 0, 0, 0.3);
    }
    
    .auth-content {
      padding: 30px;
    }
    
    .auth-form {
      display: none;
      animation: fadeIn 0.5s ease;
    }
    
    .auth-form.active {
      display: block;
    }
    
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .form-group {
      margin-bottom: 20px;
    }
    
    .form-group label {
      display: block;
      margin-bottom: 8px;
      color: #ddd;
      font-weight: 500;
    }
    
    .form-group input {
      width: 100%;
      padding: 14px;
      border-radius: 30px;
      border: 1px solid #444;
      background: rgba(40, 40, 40, 0.7);
      color: white;
      font-size: 16px;
      transition: all 0.3s ease;
    }
    
    .form-group input:focus {
      outline: none;
      border-color: red;
      box-shadow: 0 0 0 3px rgba(255, 0, 0, 0.2);
    }
    
    .form-group input:hover {
      background: rgba(50, 50, 50, 0.7);
    }
    
    .auth-button {
      background: red;
      color: white;
      border: none;
      padding: 14px;
      width: 100%;
      border-radius: 30px;
      cursor: pointer;
      font-size: 16px;
      font-weight: bold;
      transition: all 0.3s ease;
      margin-top: 10px;
      position: relative;
    }
    
    .auth-button:hover {
      background: #ff3333;
      transform: translateY(-3px);
      box-shadow: 0 5px 15px rgba(255, 0, 0, 0.4);
    }
    
    .auth-footer {
      text-align: center;
      margin-top: 25px;
      color: #aaa;
      font-size: 14px;
    }
    
    .auth-footer a {
      color: red;
      text-decoration: none;
      transition: color 0.3s;
    }
    
    .auth-footer a:hover {
      color: #ff6666;
      text-decoration: underline;
    }
    
    .error-message {
      color: #ff5555;
      font-size: 14px;
      margin-top: 5px;
      display: none;
    }
    
    .password-container {
      position: relative;
    }
    
    .toggle-password {
      position: absolute;
      top: 50%;
      left: 15px;
      transform: translateY(-50%);
      cursor: pointer;
      color: #aaa;
    }
    
    /* رسالة الترحيب */
    .welcome-message {
      text-align: center;
      margin-bottom: 30px;
      padding: 0 20px;
    }
    
    .welcome-message h3 {
      color: #fff;
      font-size: 24px;
      margin-bottom: 10px;
      text-shadow: 0 0 8px rgba(255, 0, 0, 0.4);
    }
    
    .welcome-message p {
      color: #aaa;
      line-height: 1.6;
    }
    
    /* تحسينات للهواتف */
    @media (max-width: 768px) {
      .navbar {
        padding: 12px 5%;
      }
      
      .nav-links, .auth-buttons, .search-box {
        display: none;
      }
      
      .auth-container {
        padding: 70px 15px 30px;
      }
      
      .auth-box {
        border-radius: 10px;
      }
      
      .auth-header {
        padding: 20px;
      }
      
      .auth-content {
        padding: 20px;
      }
      
      .form-group input {
        padding: 12px;
      }
      
      .auth-button {
        padding: 12px;
      }
    }
    
    /* تأثيرات إضافية */
    .cinema-effect {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: -1;
      background: radial-gradient(circle at center, rgba(255,0,0,0.05) 0%, rgba(0,0,0,1) 70%);
    }
    
    .particle {
      position: absolute;
      background: rgba(255, 0, 0, 0.2);
      border-radius: 50%;
      animation: float 15s infinite linear;
    }
    
    @keyframes float {
      0% { transform: translateY(0) translateX(0) scale(0.5); opacity: 0; }
      10% { opacity: 1; }
      90% { opacity: 0.8; }
      100% { transform: translateY(-100vh) translateX(100px) scale(1); opacity: 0; }
    }
    
    /* تأثيرات التحميل */
    .loader {
      display: none;
      width: 20px;
      height: 20px;
      border: 3px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top: 3px solid #fff;
      animation: spin 1s linear infinite;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }
    
    @keyframes spin {
      0% { transform: translate(-50%, -50%) rotate(0deg); }
      100% { transform: translate(-50%, -50%) rotate(360deg); }
    }
    
    /* رسالة النجاح */
    .success-message {
      display: none;
      background: rgba(0, 200, 0, 0.2);
      border: 1px solid rgba(0, 255, 0, 0.3);
      border-radius: 8px;
      padding: 15px;
      text-align: center;
      margin-top: 20px;
      color: #7fff7f;
    }
  </style>
</head>
<body>
  <!-- تأثيرات السينما -->
  <div class="cinema-effect" id="cinema-effect"></div>
  
  <!-- شريط التنقل العلوي -->
  <nav class="navbar">
    <div class="logo">سينما لاند</div>
    <ul class="nav-links">
      <li><a href="https://cinemalandd.netlify.app">الصفحة الرئيسية</a></li>
      <li><a href="#">أفلام</a></li>
      <li><a href="#">مسلسلات</a></li>
      <li><a href="contact_formsubmit.html">تواصل معنا</a></li>
      <li><a href="AboutUs.html">عنّا</a></li>
    </ul>
    <div class="auth-buttons">
      <a href="#login" class="login-btn">
        <button>تسجيل الدخول</button>
      </a>
      <a href="#signup" class="Signup-btn">
        <button>انشاء حساب</button>
      </a>
    </div>
    <div class="search-box">
      <input type="text" placeholder="ابحث..." id="search-input">
      <button id="search-btn">
        <span class="material-icons">search</span>
      </button>
    </div>
  </nav>
  
  <!-- محتوى صفحة المصادقة -->
  <div class="auth-container">
    <div class="auth-box">
      <div class="auth-header">
        <h2>مرحبًا بكم في سينما لاند</h2>
      </div>
      
      <div class="auth-tabs">
        <div class="auth-tab active" data-tab="login">تسجيل الدخول</div>
        <div class="auth-tab" data-tab="signup">انشاء حساب جديد</div>
      </div>
      
      <div class="auth-content">
        <!-- رسالة الترحيب -->
        <div class="welcome-message">
          <h3>عالم من الأفلام والمسلسلات بانتظارك</h3>
          <p>سجل الدخول للوصول إلى مكتبتنا الواسعة من المحتوى الحصري والمميز</p>
        </div>
        
        <!-- رسالة النجاح -->
        <div class="success-message" id="success-message">
          تم إنشاء الحساب بنجاح! يمكنك تسجيل الدخول الآن.
        </div>
        
        <!-- نموذج تسجيل الدخول -->
        <form class="auth-form active" id="login-form">
          <div class="form-group">
            <label for="login-email">البريد الإلكتروني</label>
            <input type="email" id="login-email" placeholder="ادخل بريدك الإلكتروني" required>
            <div class="error-message" id="login-email-error">يرجى إدخال بريد إلكتروني صحيح</div>
          </div>
          
          <div class="form-group">
            <label for="login-password">كلمة المرور</label>
            <div class="password-container">
              <input type="password" id="login-password" placeholder="ادخل كلمة المرور" required>
              <span class="toggle-password material-icons" data-target="login-password">visibility</span>
            </div>
            <div class="error-message" id="login-password-error">كلمة المرور يجب أن تكون 6 أحرف على الأقل</div>
          </div>
          
          <div class="form-group">
            <button type="submit" class="auth-button" id="login-button">
              <span id="login-text">تسجيل الدخول</span>
              <span class="loader" id="login-loader"></span>
            </button>
          </div>
          
          <div class="auth-footer">
            <a href="#">نسيت كلمة المرور؟</a> | 
            <a href="#" id="switch-to-signup">ليس لديك حساب؟ سجل الآن</a>
          </div>
        </form>
        
        <!-- نموذج إنشاء حساب -->
        <form class="auth-form" id="signup-form">
          <div class="form-group">
            <label for="signup-name">الاسم الكامل</label>
            <input type="text" id="signup-name" placeholder="ادخل اسمك الكامل" required>
            <div class="error-message" id="signup-name-error">الاسم يجب أن يكون 3 أحرف على الأقل</div>
          </div>
          
          <div class="form-group">
            <label for="signup-email">البريد الإلكتروني</label>
            <input type="email" id="signup-email" placeholder="ادخل بريدك الإلكتروني" required>
            <div class="error-message" id="signup-email-error">يرجى إدخال بريد إلكتروني صحيح</div>
          </div>
          
          <div class="form-group">
            <label for="signup-password">كلمة المرور</label>
            <div class="password-container">
              <input type="password" id="signup-password" placeholder="اختر كلمة مرور قوية" required>
              <span class="toggle-password material-icons" data-target="signup-password">visibility</span>
            </div>
            <div class="error-message" id="signup-password-error">كلمة المرور يجب أن تكون 8 أحرف على الأقل</div>
          </div>
          
          <div class="form-group">
            <label for="signup-confirm">تأكيد كلمة المرور</label>
            <div class="password-container">
              <input type="password" id="signup-confirm" placeholder="أعد إدخال كلمة المرور" required>
              <span class="toggle-password material-icons" data-target="signup-confirm">visibility</span>
            </div>
            <div class="error-message" id="signup-confirm-error">كلمات المرور غير متطابقة</div>
          </div>
          
          <div class="form-group">
            <button type="submit" class="auth-button" id="signup-button">
              <span id="signup-text">انشاء حساب جديد</span>
              <span class="loader" id="signup-loader"></span>
            </button>
          </div>
          
          <div class="auth-footer">
            <a href="#" id="switch-to-login">لديك حساب بالفعل؟ سجل الدخول الآن</a>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // التعديلات الخاصة بـ Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyCJNX1JVW2C1fxV8rUFivMTb1CnNaLbQGE",
      authDomain: "cinemaland-be410.firebaseapp.com",
      projectId: "cinemaland-be410",
      storageBucket: "cinemaland-be410.firebasestorage.app",
      messagingSenderId: "232950096339",
      appId: "1:232950096339:web:ab441db80a42f1d84a4f26",
      measurementId: "G-7VWECZ7DTN"
    };
    
    // تهيئة Firebase
    const app = firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth(); // تعريف خدمة المصادقة

    // إنشاء تأثيرات الجسيمات
    function createParticles() {
      const effect = document.getElementById('cinema-effect');
      const particlesCount = 20;
      
      for (let i = 0; i < particlesCount; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        
        // حجم عشوائي
        const size = Math.random() * 30 + 5;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;
        
        // موقع عشوائي
        particle.style.left = `${Math.random() * 100}%`;
        particle.style.top = `${Math.random() * 100}%`;
        
        // لون عشوائي
        const red = Math.floor(Math.random() * 100) + 155;
        const alpha = Math.random() * 0.2 + 0.1;
        particle.style.backgroundColor = `rgba(${red}, 0, 0, ${alpha})`;
        
        // مدة عشوائية للتحريك
        particle.style.animationDuration = `${Math.random() * 20 + 10}s`;
        particle.style.animationDelay = `${Math.random() * 5}s`;
        
        effect.appendChild(particle);
      }
    }
    
    // تبديل بين تسجيل الدخول وإنشاء حساب
    function setupAuthTabs() {
      const tabs = document.querySelectorAll('.auth-tab');
      const forms = document.querySelectorAll('.auth-form');
      
      tabs.forEach(tab => {
        tab.addEventListener('click', () => {
          const tabId = tab.getAttribute('data-tab');
          
          // تحديث التبويبات النشطة
          tabs.forEach(t => t.classList.remove('active'));
          tab.classList.add('active');
          
          // تحديث النماذج النشطة
          forms.forEach(form => form.classList.remove('active'));
          document.getElementById(`${tabId}-form`).classList.add('active');
        });
      });
      
      // روابط التبديل
      document.getElementById('switch-to-signup').addEventListener('click', (e) => {
        e.preventDefault();
        tabs[1].click();
      });
      
      document.getElementById('switch-to-login').addEventListener('click', (e) => {
        e.preventDefault();
        tabs[0].click();
      });
    }
    
    // إظهار/إخفاء كلمة المرور
    function setupPasswordToggle() {
      const toggles = document.querySelectorAll('.toggle-password');
      
      toggles.forEach(toggle => {
        toggle.addEventListener('click', () => {
          const targetId = toggle.getAttribute('data-target');
          const passwordInput = document.getElementById(targetId);
          const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
          
          passwordInput.setAttribute('type', type);
          toggle.textContent = type === 'password' ? 'visibility' : 'visibility_off';
        });
      });
    }
    
    // دالة للتحقق من صحة البريد الإلكتروني
    function validateEmail(email) {
      const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      return re.test(email);
    }
    
    // إظهار/إخفاء مؤشر التحميل
    function toggleLoader(show, type) {
      const loader = document.getElementById(`${type}-loader`);
      const text = document.getElementById(`${type}-text`);
      
      if (show) {
        loader.style.display = 'inline-block';
        text.style.display = 'none';
      } else {
        loader.style.display = 'none';
        text.style.display = 'inline';
      }
    }
    
    // إظهار رسالة خطأ
    function showError(elementId, message) {
      const errorElement = document.getElementById(elementId);
      errorElement.textContent = message;
      errorElement.style.display = 'block';
    }
    
    // إخفاء جميع رسائل الخطأ
    function hideAllErrors() {
      document.querySelectorAll('.error-message').forEach(el => {
        el.style.display = 'none';
      });
    }
    
    // إعداد تحقق النماذج
    function setupFormValidation() {
      const loginForm = document.getElementById('login-form');
      loginForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const email = document.getElementById('login-email').value;
        const password = document.getElementById('login-password').value;
        
        // إخفاء رسائل الخطأ القديمة
        hideAllErrors();
        
        // التحقق من صحة البيانات
        let isValid = true;
        
        if (!validateEmail(email)) {
          showError('login-email-error', 'يرجى إدخال بريد إلكتروني صحيح');
          isValid = false;
        }
        
        if (password.length < 6) {
          showError('login-password-error', 'كلمة المرور يجب أن تكون 6 أحرف على الأقل');
          isValid = false;
        }
        
        if (!isValid) return;
        
        // تسجيل الدخول
        toggleLoader(true, 'login');
        
        auth.signInWithEmailAndPassword(email, password)
          .then(() => {
            window.location.href = "https://cinemalandd.netlify.app";
          })
          .catch((error) => {
            toggleLoader(false, 'login');
            
            let errorMessage = 'حدث خطأ أثناء تسجيل الدخول';
            
            // تحسين رسائل الخطأ للمستخدم
            switch(error.code) {
              case 'auth/user-not-found':
                errorMessage = 'لا يوجد حساب مرتبط بهذا البريد الإلكتروني';
                break;
              case 'auth/wrong-password':
                errorMessage = 'كلمة المرور غير صحيحة';
                break;
              case 'auth/invalid-email':
                errorMessage = 'بريد إلكتروني غير صالح';
                break;
              case 'auth/too-many-requests':
                errorMessage = 'تم تجاوز عدد المحاولات المسموح بها. حاول مرة أخرى لاحقاً';
                break;
            }
            
            showError('login-password-error', errorMessage);
          });
      });
      
      // إنشاء حساب 
      const signupForm = document.getElementById('signup-form');
      signupForm.addEventListener('submit', (e) => {
        e.preventDefault();
        const name = document.getElementById('signup-name').value;
        const email = document.getElementById('signup-email').value;
        const password = document.getElementById('signup-password').value;
        const confirm = document.getElementById('signup-confirm').value;        
        
        // إخفاء رسائل الخطأ القديمة
        hideAllErrors();
        
        // التحقق من صحة البيانات
        let isValid = true;
        
        if (name.length < 3) {
          showError('signup-name-error', 'الاسم يجب أن يكون 3 أحرف على الأقل');
          isValid = false;
        }
        
        if (!validateEmail(email)) {
          showError('signup-email-error', 'يرجى إدخال بريد إلكتروني صحيح');
          isValid = false;
        }
        
        if (password.length < 8) {
          showError('signup-password-error', 'كلمة المرور يجب أن تكون 8 أحرف على الأقل');
          isValid = false;
        }
        
        if (password !== confirm) {
          showError('signup-confirm-error', 'كلمات المرور غير متطابقة');
          isValid = false;
        }
        
        if (!isValid) return;
        
        // إنشاء الحساب
        toggleLoader(true, 'signup');
        
        auth.createUserWithEmailAndPassword(email, password)
          .then((userCredential) => {
            return userCredential.user.updateProfile({ displayName: name });
          })
          .then(() => {
            toggleLoader(false, 'signup');
            
            // إظهار رسالة النجاح
            document.getElementById('success-message').style.display = 'block';
            
            // إعادة تعيين النموذج
            signupForm.reset();
            
            // التبديل إلى تسجيل الدخول بعد 3 ثواني
            setTimeout(() => {
              document.querySelector('.auth-tab[data-tab="login"]').click();
              document.getElementById('success-message').style.display = 'none';
            }, 3000);
          })
          .catch((error) => {
            toggleLoader(false, 'signup');
            
            let errorElement = 'signup-email-error';
            let errorMessage = 'حدث خطأ أثناء إنشاء الحساب';
            
            switch(error.code) {
              case 'auth/email-already-in-use':
                errorMessage = 'البريد الإلكتروني مستخدم بالفعل';
                break;
              case 'auth/weak-password':
                errorElement = 'signup-password-error';
                errorMessage = 'كلمة المرور ضعيفة جداً (يجب أن تكون 6 أحرف على الأقل)';
                break;
              case 'auth/invalid-email':
                errorMessage = 'بريد إلكتروني غير صالح';
                break;
              case 'auth/operation-not-allowed':
                errorMessage = 'خدمة المصادقة غير مفعلة. يرجى مراجعة إعدادات Firebase';
                break;
              case 'auth/network-request-failed':
                errorMessage = 'مشكلة في اتصال الشبكة. يرجى التحقق من اتصال الإنترنت';
                break;
              default:
                errorMessage = `خطأ غير متوقع: ${error.message}`;
            }
            
            showError(errorElement, errorMessage);
          });
      });
    }
    
    // اختبار اتصال Firebase
    function testFirebaseConnection() {
      console.log("جاري اختبار اتصال Firebase...");
      
      // محاولة إنشاء حساب اختباري (سيتم حذفه تلقائياً)
      const testEmail = `test${Math.floor(Math.random() * 10000)}@example.com`;
      const testPassword = "Test1234!";
      
      auth.createUserWithEmailAndPassword(testEmail, testPassword)
        .then(userCredential => {
          console.log("✅ اختبار اتصال Firebase ناجح!");
          return userCredential.user.delete();
        })
        .catch(error => {
          console.error("❌ خطأ في اختبار Firebase:", error);
          alert(`خطأ في اتصال Firebase: ${error.message}\nيرجى مراجعة تكوين Firebase`);
        });
    }
    
    // تهيئة الصفحة عند التحميل
    document.addEventListener('DOMContentLoaded', () => {
      createParticles();
      setupAuthTabs();
      setupPasswordToggle();
      setupFormValidation();
      
      // اختبار اتصال Firebase بعد 3 ثواني
      setTimeout(testFirebaseConnection, 3000);
    });
  </script>
</body>
</html>
