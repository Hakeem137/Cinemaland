<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تفاصيل المسلسل</title>
  
  <!-- استيراد خط Tajawal من جوجل -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- استيراد أيقونات Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

  <style>
    /* RESET & BASE */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      position: relative;
      color: #e0e0e0; /* تغيير لون النص ليكون أفتح */
      font-family: 'Tajawal', sans-serif;
      direction: rtl;
      text-align: right;
      line-height: 1.6;
      overflow-x: hidden;
      background: #1e2a47; /* إضافة لون الخلفية الكحلي مباشرة للـ body */
    }
    a {
      text-decoration: none;
      color: inherit;
    }
    img {
      display: block;
      max-width: 100%;
    }
    .container {
      width: 90%;
      max-width: 1200px;
      margin: auto;
      padding: 0 20px;
    }

    /* HEADER */
    header {
      background-color: rgba(0, 0, 0, 0.6); /* خلفية شفافة داكنة */
      padding: 20px 0;
      backdrop-filter: blur(5px); /* تأثير ضبابي */
    }
    .new-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 15px;
    }
    .site-logo {
      flex: 0 0 auto;
      font-size: 1.6rem;
      font-weight: 700;
      color: #d60000;
    }
    .main-nav ul {
      list-style: none;
      display: flex;
      align-items: center;
      gap: 15px;
      flex-wrap: wrap;
    }
    .main-nav a {
      color: #fff;
      font-size: 0.95rem;
      padding: 8px;
      transition: color 0.3s;
    }
    .main-nav a:hover {
      color: #d60000;
    }
    .auth-buttons {
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }
    .auth-buttons button {
      border: none;
      color: #fff;
      padding: 8px 16px;
      border-radius: 10px;
      cursor: pointer;
      transition: background-color 0.3s;
      font-size: 0.95rem;
      font-weight: 600;
    }
    .auth-buttons .login-btn {
      background-color: #d60000;
    }
    .auth-buttons .login-btn:hover {
      background-color: #b50000;
    }
    .auth-buttons .register-btn {
      background-color: rgba(51, 51, 51, 0.7);
    }
    .auth-buttons .register-btn:hover {
      background-color: rgba(68, 68, 68, 0.8);
    }
    .search-bar {
      flex: 1 1 auto;
      max-width: 300px;
      display: flex;
      align-items: center;
      background-color: rgba(51, 51, 51, 0.7);
      border-radius: 5px;
      overflow: hidden;
    }
    .search-bar input {
      border: none;
      outline: none;
      background-color: transparent;
      color: #fff;
      padding: 8px 10px;
      font-size: 0.95rem;
      width: 100%;
    }
    .search-bar input::placeholder {
      color: #aaa;
    }
    .search-bar button.search-btn {
      background-color: rgba(85, 85, 85, 0.7);
      border: none;
      color: #fff;
      padding: 8px 12px;
      cursor: pointer;
      transition: background-color 0.3s;
    }
    .search-bar button.search-btn:hover {
      background-color: rgba(102, 102, 102, 0.8);
    }

    /* MAIN SECTION */
    .media-details-box {
      display: flex;
      flex-direction: row;
      align-items: flex-start;
      background-color: rgba(42, 42, 42, 0.8); /* شفافية */
      border-radius: 8px;
      padding: 20px;
      gap: 20px;
      margin: 20px 0;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    .poster-container {
      flex: 0 0 300px;
      text-align: center;
    }
    .poster-container img {
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0,0,0,0.8);
      width: 100%;
      height: auto;
      aspect-ratio: 2/3;
      object-fit: cover;
    }
    .details-container {
      flex: 1;
      text-align: right;
    }
    .details-container h1 {
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 10px;
      color: #ff0000;
    }
    .info-items {
      font-size: 0.95rem;
      line-height: 1.8;
      margin-bottom: 15px;
      display: flex;
      flex-wrap: wrap;
      gap: 15px;
    }
    .info-item {
      background: rgba(255, 0, 0, 0.15);
      padding: 5px 12px;
      border-radius: 20px;
      border: 1px solid rgba(255, 0, 0, 0.3);
      color: #fff; /* تغيير لون النص ليكون أبيض */
    }
    .imdb-badge {
      display: inline-flex;
      align-items: center;
      background-color: #e6b91e;
      color: #000;
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 0.9rem;
      font-weight: 600;
      margin: 5px 0;
    }
    .imdb-badge i {
      margin-left: 5px;
      color: #000;
    }
    .media-overview {
      font-size: 1rem;
      color: #ddd;
      line-height: 1.7;
      margin: 15px 0;
    }
    .action-buttons {
      display: flex;
      gap: 15px;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    .action-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background-color: #d60000;
      color: #fff;
      padding: 12px 25px;
      border-radius: 4px;
      font-size: 1rem;
      font-weight: 600;
      transition: all 0.3s;
      border: none;
      cursor: pointer;
    }
    .action-btn:hover {
      background-color: #b50000;
      transform: translateY(-2px);
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .action-btn.secondary {
      background-color: rgba(51, 51, 51, 0.8);
    }
    .action-btn.secondary:hover {
      background-color: rgba(68, 68, 68, 0.9);
    }

    /* SEASONS SECTION */
    .seasons-section {
      padding: 20px 0;
      margin-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    .section-title {
      font-size: 1.6rem;
      margin-bottom: 20px;
      font-weight: 700;
      position: relative;
      display: inline-block;
      padding-bottom: 8px;
      color: #fff;
    }
    .section-title::after {
      content: "";
      position: absolute;
      bottom: 0;
      right: 0;
      width: 50px;
      height: 3px;
      background-color: #d60000;
    }
    .seasons-list {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .season-card {
      flex: 1 1 calc(20% - 20px);
      min-width: 150px;
      max-width: 200px;
      background-color: rgba(44, 44, 44, 0.8);
      border-radius: 8px;
      overflow: hidden;
      text-align: center;
      transition: transform 0.3s;
      position: relative;
      height: 280px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .season-card:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3);
    }
    .season-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .season-label {
      position: absolute;
      bottom: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.8);
      color: #ff0000;
      font-weight: bold;
      font-size: 1rem;
      text-align: center;
      padding: 8px 0;
      z-index: 10;
    }

    /* RECOMMENDED SECTION */
    .recommended-section {
      padding: 20px 0;
      margin-top: 20px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    .media-list {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
    .media-card {
      flex: 1 1 calc(20% - 20px);
      min-width: 150px;
      max-width: 200px;
      background-color: rgba(44, 44, 44, 0.8);
      border-radius: 8px;
      overflow: hidden;
      text-align: center;
      transition: transform 0.3s;
      position: relative;
      height: 280px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }
    .media-card:hover {
      transform: scale(1.05);
      box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3);
    }
    .media-card img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .media-title {
      position: absolute;
      bottom: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.8);
      color: #ff0000;
      font-weight: bold;
      font-size: 0.9rem;
      text-align: center;
      padding: 8px 5px;
      z-index: 10;
    }

    /* FOOTER */
    footer {
      background-color: rgba(17, 17, 17, 0.9);
      padding: 30px 0;
      text-align: center;
      font-size: 1rem;
      color: #d60000;
      margin-top: 40px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
    }
    .footer-content {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .footer-links {
      display: flex;
      justify-content: center;
      gap: 25px;
      flex-wrap: wrap;
    }
    .footer-links a {
      transition: color 0.3s;
      color: #aaa;
    }
    .footer-links a:hover {
      color: #ff0000;
    }

    /* LOADER */
    .loader {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 300px;
      flex-direction: column;
      gap: 20px;
    }
    .spinner {
      width: 50px;
      height: 50px;
      border: 5px solid rgba(255, 0, 0, 0.3);
      border-radius: 50%;
      border-top-color: #d60000;
      animation: spin 1s linear infinite;
    }
    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* RESPONSIVE DESIGN */
    @media (max-width: 992px) {
      .media-details-box {
        flex-direction: column;
        align-items: center;
      }
      .poster-container {
        flex: 0 0 auto;
        width: 60%;
        max-width: 300px;
      }
      .details-container {
        width: 100%;
      }
      .season-card, .media-card {
        flex: 1 1 calc(33% - 20px);
      }
    }
    @media (max-width: 768px) {
      .new-header {
        flex-direction: column;
        align-items: flex-start;
      }
      .search-bar {
        max-width: 100%;
        width: 100%;
      }
      .section-title {
        font-size: 1.4rem;
      }
      .season-card, .media-card {
        flex: 1 1 calc(50% - 20px);
        height: 250px;
      }
      .action-buttons {
        flex-direction: column;
      }
      .action-btn {
        width: 100%;
        justify-content: center;
      }
    }
    @media (max-width: 480px) {
      .poster-container {
        width: 80%;
      }
      .season-card, .media-card {
        flex: 1 1 100%;
        max-width: 250px;
        height: 220px;
      }
      .info-items {
        flex-direction: column;
        gap: 8px;
      }
      .info-item {
        width: 100%;
        text-align: center;
      }
    }
  </style>
</head>
<body>
  <!-- HEADER -->
  <header>
    <div class="container new-header">
      <div class="site-logo">سينما لاند</div>
      <nav class="main-nav">
        <ul>
          <li><a href="#">الصفحة الرئيسية</a></li>
          <li><a href="#">الأفلام</a></li>
          <li><a href="#">المسلسلات</a></li>
          <li><a href="#">عنا</a></li>
        </ul>
      </nav>
      <div class="auth-buttons">
        <button class="login-btn">تسجيل الدخول</button>
        <button class="register-btn">تسجيل</button>
      </div>
      <div class="search-bar">
        <input type="text" placeholder="ابحث عن أفلام أو مسلسلات..." aria-label="بحث">
        <button type="button" class="search-btn"><i class="fas fa-search"></i></button>
      </div>
    </div>
  </header>

  <!-- MAIN SECTION -->
  <section class="container main-section">
    <div class="media-details-box">
      <div class="poster-container">
        <img id="poster-img" src="https://image.tmdb.org/t/p/w500/ggFHVNu6YYI5L9pCfOacjizRGt.jpg" alt="بوستر مسلسل بريكينج باد">
      </div>
      <div class="details-container">
        <h1 id="media-title">بريكينج باد</h1>
        <div class="info-items" id="media-info">
          <span class="info-item">عدد المواسم: 5</span>
          <span class="info-item">عدد الحلقات: 62</span>
          <span class="info-item">الحالة: منتهي</span>
          <span class="info-item">سنة البدء: 2008</span>
          <span class="info-item">التصنيف: دراما، جريمة، إثارة</span>
        </div>
        <div class="imdb-badge">
          <i class="fas fa-star"></i>
          <span id="rating-value">9.5</span>
        </div>
        <p class="media-overview" id="media-overview">تدور أحداث المسلسل حول والتر وايت، مدرس كيمياء في المدرسة الثانوية، الذي يتم تشخيص إصابته بسرطان الرئة في مرحلة متقدمة. فيقرر والتر الدخول في عالم تجارة المخدرات لضمان مستقبل مالي لعائلته بعد وفاته. بمساعدة جيسي بينكمان، أحد طلابه السابقين، يبدأ والتر في تصنيع وبيع الميثامفيتامين عالي الجودة.</p>
        
        <div class="action-buttons">
          <button class="action-btn">
            <i class="fas fa-play"></i> مشاهدة الآن
          </button>
          <button class="action-btn secondary">
            <i class="fas fa-plus"></i> إضافة إلى المفضلة
          </button>
        </div>
      </div>
    </div>
  </section>

  <!-- SEASONS SECTION -->
  <section class="seasons-section">
    <div class="container">
      <h2 class="section-title">مواسم المسلسل</h2>
      <div class="seasons-list" id="seasons-list">
        <div class="season-card">
          <img src="https://image.tmdb.org/t/p/w500/ggFHVNu6YYI5L9pCfOacjizRGt.jpg" alt="الموسم 1">
          <div class="season-label">الموسم 1</div>
        </div>
        <div class="season-card">
          <img src="https://image.tmdb.org/t/p/w500/aY6AjYQK0e1dP8dQZqkX1k2lqgS.jpg" alt="الموسم 2">
          <div class="season-label">الموسم 2</div>
        </div>
        <div class="season-card">
          <img src="https://image.tmdb.org/t/p/w500/qWnJzyZhyy74gjpSjIXWmuk0ifX.jpg" alt="الموسم 3">
          <div class="season-label">الموسم 3</div>
        </div>
        <div class="season-card">
          <img src="https://image.tmdb.org/t/p/w500/dfYLBqI0N7r0kEGnB6m7K4o0m2d.jpg" alt="الموسم 4">
          <div class="season-label">الموسم 4</div>
        </div>
        <div class="season-card">
          <img src="https://image.tmdb.org/t/p/w500/ztk4B1t0c0d0sWUErgxV0k0qF8l.jpg" alt="الموسم 5">
          <div class="season-label">الموسم 5</div>
        </div>
      </div>
    </div>
  </section>

  <!-- RECOMMENDED SECTION -->
  <section class="recommended-section">
    <div class="container">
      <h2 class="section-title">مسلسلات مشابهة</h2>
      <div class="media-list" id="recommended-list">
        <div class="media-card">
          <img src="https://image.tmdb.org/t/p/w500/hdXQcisc1nz0qgVjEjMqUP8z1eC.jpg" alt="بابلو إسكوبار">
          <div class="media-title">بابلو إسكوبار</div>
        </div>
        <div class="media-card">
          <img src="https://image.tmdb.org/t/p/w500/7Tr4d3xR1O0OcIhQd4j0L2xJfFb.jpg" alt="ناركوس">
          <div class="media-title">ناركوس</div>
        </div>
        <div class="media-card">
          <img src="https://image.tmdb.org/t/p/w500/7Tr4d3xR1O0OcIhQd4j0L2xJfFb.jpg" alt="أوزارك">
          <div class="media-title">أوزارك</div>
        </div>
        <div class="media-card">
          <img src="https://image.tmdb.org/t/p/w500/7Tr4d3xR1O0OcIhQd4j0L2xJfFb.jpg" alt="بيت من ورق">
          <div class="media-title">بيت من ورق</div>
        </div>
        <div class="media-card">
          <img src="https://image.tmdb.org/t/p/w500/7Tr4d3xR1O0OcIhQd4j0L2xJfFb.jpg" alt="صائدو الجوائز">
          <div class="media-title">صائدو الجوائز</div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="container footer-content">
      <div class="footer-links">
        <a href="#">الشروط والأحكام</a>
        <a href="#">سياسة الخصوصية</a>
        <a href="#">تواصل معنا</a>
        <a href="#">عن الموقع</a>
        <a href="#">مساعدة</a>
      </div>
      <p>جميع الحقوق محفوظة لموقع سينما لاند - سنة 2025</p>
    </div>
  </footer>

  <!-- JavaScript -->
  <script>
    // مفتاح API لـ TMDB
    const TMDB_API_KEY = '770f9ab527c9ae9280f041e87b1f251a';
    
    // استخراج معرف المسلسل من رابط الصفحة
    const urlParams = new URLSearchParams(window.location.search);
    const mediaId = urlParams.get('id') || '1396'; // Breaking Bad كافتراضي
    
    // عناصر DOM
    const posterImg = document.getElementById('poster-img');
    const mediaTitle = document.getElementById('media-title');
    const mediaInfo = document.getElementById('media-info');
    const ratingValue = document.getElementById('rating-value');
    const mediaOverview = document.getElementById('media-overview');
    const seasonsList = document.getElementById('seasons-list');
    const recommendedList = document.getElementById('recommended-list');

    // جلب تفاصيل المسلسل من TMDB
    async function fetchMediaDetails() {
      try {
        const response = await fetch(`https://api.themoviedb.org/3/tv/${mediaId}?api_key=${TMDB_API_KEY}&language=ar`);
        const data = await response.json();
        return data;
      } catch (error) {
        console.error('حدث خطأ أثناء جلب بيانات المسلسل:', error);
        return null;
      }
    }

    // جلب مواسم المسلسل
    async function fetchSeasons() {
      try {
        const response = await fetch(`https://api.themoviedb.org/3/tv/${mediaId}?api_key=${TMDB_API_KEY}&append_to_response=seasons&language=ar`);
        const data = await response.json();
        return data.seasons;
      } catch (error) {
        console.error('حدث خطأ أثناء جلب المواسم:', error);
        return [];
      }
    }

    // جلب المسلسلات الموصى بها
    async function fetchRecommendations() {
      try {
        const response = await fetch(`https://api.themoviedb.org/3/tv/${mediaId}/recommendations?api_key=${TMDB_API_KEY}&language=ar&page=1`);
        const data = await response.json();
        return data.results.slice(0, 5); // أول 5 نتائج
      } catch (error) {
        console.error('حدث خطأ أثناء جلب المسلسلات الموصى بها:', error);
        return [];
      }
    }

    // عرض تفاصيل المسلسل
    function displayMediaDetails(media) {
      // تحديث الصورة
      posterImg.src = `https://image.tmdb.org/t/p/w500${media.poster_path}`;
      posterImg.alt = media.name;
      
      // تحديث العنوان
      mediaTitle.textContent = media.name;
      
      // تحديث المعلومات الأساسية
      const infoItems = [
        `عدد المواسم: ${media.number_of_seasons}`,
        `عدد الحلقات: ${media.number_of_episodes}`,
        `الحالة: ${media.status}`,
        `سنة البدء: ${media.first_air_date.split('-')[0]}`,
        `التصنيف: ${media.genres.map(genre => genre.name).join(', ')}`
      ];
      
      mediaInfo.innerHTML = '';
      infoItems.forEach(item => {
        const span = document.createElement('span');
        span.className = 'info-item';
        span.textContent = item;
        mediaInfo.appendChild(span);
      });
      
      // تحديث التقييم
      ratingValue.textContent = media.vote_average.toFixed(1);
      
      // تحديث الوصف
      mediaOverview.textContent = media.overview || 'لا يوجد وصف متوفر.';
      
      // تحديث عنوان الصفحة
      document.title = `${media.name} - سينما لاند`;
    }

    // عرض مواسم المسلسل
    function displaySeasons(seasons) {
      seasonsList.innerHTML = '';
      
      seasons.forEach(season => {
        // تخطي الموسم 0 (خاص بالمقتطفات)
        if (season.season_number === 0) return;
        
        const seasonCard = document.createElement('div');
        seasonCard.className = 'season-card';
        seasonCard.innerHTML = `
          <img src="https://image.tmdb.org/t/p/w500${season.poster_path || 'https://via.placeholder.com/300x450?text=No+Image'}" alt="موسم ${season.season_number}">
          <div class="season-label">الموسم ${season.season_number}</div>
        `;
        
        seasonsList.appendChild(seasonCard);
      });
    }

    // عرض المسلسلات الموصى بها
    function displayRecommendations(recommendations) {
      recommendedList.innerHTML = '';
      
      recommendations.forEach(media => {
        const mediaCard = document.createElement('div');
        mediaCard.className = 'media-card';
        mediaCard.innerHTML = `
          <img src="https://image.tmdb.org/t/p/w500${media.poster_path}" alt="${media.name}">
          <div class="media-title">${media.name}</div>
        `;
        
        // عند النقر على المسلسل، الانتقال لصفحة تفاصيله
        mediaCard.addEventListener('click', () => {
          window.location.href = `?id=${media.id}`;
        });
        
        recommendedList.appendChild(mediaCard);
      });
    }

    // تهيئة الصفحة
    async function initPage() {
      // جلب وعرض تفاصيل المسلسل
      const media = await fetchMediaDetails();
      if (media) {
        displayMediaDetails(media);
      } else {
        mediaTitle.textContent = 'حدث خطأ في تحميل البيانات';
        mediaOverview.textContent = 'يرجى المحاولة مرة أخرى لاحقًا.';
      }
      
      // جلب وعرض المواسم
      const seasons = await fetchSeasons();
      if (seasons.length > 0) {
        displaySeasons(seasons);
      } else {
        seasonsList.innerHTML = '<p>لا توجد مواسم متاحة</p>';
      }
      
      // جلب وعرض المسلسلات الموصى بها
      const recommendations = await fetchRecommendations();
      if (recommendations.length > 0) {
        displayRecommendations(recommendations);
      } else {
        recommendedList.innerHTML = '<p>لا توجد توصيات متاحة</p>';
      }
    }

    // بدء التحميل عند اكتمال تحميل الصفحة
    document.addEventListener('DOMContentLoaded', initPage);
    
    // وظيفة البحث
    document.querySelector('.search-btn').addEventListener('click', function() {
      const query = document.querySelector('.search-bar input').value.trim();
      if (query) {
        alert(`سيتم البحث عن: ${query}`);
        // يمكن تنفيذ البحث هنا
      }
    });
  </script>
</body>
</html>
